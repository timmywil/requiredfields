/*
*   requiredfields.js
*   timmy willison
*   Minimalist form validation for all browsers (IE6+, Firefox, Opera, Safari, Chrome)
*   HTML5 placeholders across all browsers
*   Remember to write your own css for .invalid inputs
*   Add class 'reqd' to required fields.
*   Add class 'reqd-email' to required e-mail fields
*/
(function($,window,document,undefined){$.fn.checkForm=function(){function validForm(form){var allGood=true;var allTags=form.getElementsByTagName("*");for(var i=0;i<allTags.length;i++){if(!validTag(allTags[i])){allGood=false}}return allGood;function validTag(thisTag){var outClass="";var allClasses=thisTag.className.split(" ");for(var j=0;j<allClasses.length;j++){outClass+=validBasedOnClass(allClasses[j])+" "}thisTag.className=outClass;if(outClass.indexOf("invalid")>-1){$(thisTag).prev("label").addClass("invalid");return false}return true;function validBasedOnClass(thisClass){var classBack="";switch(thisClass){case"":case"invalid":break;case"reqd":var v=$.trim(thisTag.value);if(v===""||v==="NONE"||v===$(thisTag).data("placeholder")){classBack="invalid ";if(thisTag.nodeName==="SELECT"){$(thisTag).closest("div.elect-container").addClass("invalid")}}classBack+=thisClass;break;case"reqd-email":var v=$.trim(thisTag.value);var emailPattern=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;if(!emailPattern.test(v)){classBack="invalid "}classBack+=thisClass;break;default:classBack+=thisClass}return classBack}}}var rawForm=this[0];if(rawForm.tagName==="FORM"){return validForm(rawForm)}return false};$.fn.validate=function(){return this.submit(function(e){var check=$(this).checkForm();if(!check){$(this).find("input:text").blur()}return check})};$.fn.outOfPlace=function(opts){opts=$.extend({submit:function(){$(this).find("input, textarea").each(function(){var $input=$(this);if($input.val()==$input.data("placeholder")){$input.val("")}});return true},placeholderClass:"place"},opts);return this.addClass(opts.placeholderClass).each(function(){var input=$(this);var defaultText=input.attr("placeholder")||"";input.data("placeholder",defaultText);input.removeAttr("placeholder");if($.trim(input.val())===""){input.val(defaultText)}input.focus(function(){if(input.val()==defaultText){input.val("").removeClass(opts.placeholderClass)}}).blur(function(){if($.trim(input.val())===""){input.val(defaultText).addClass(opts.placeholderClass)}}).closest("form").submit(opts.submit)})}})(jQuery,this,document);